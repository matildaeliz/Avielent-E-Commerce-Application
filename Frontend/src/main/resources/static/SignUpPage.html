<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Avielent E-Commerce | Sign Up</title>
    <link rel="stylesheet" type="text/css" href="SignUp.css">
</head>
<body>
<img id="logo" src="LOGO.png">
<H5 id="brandName">AVIELENT E-COMMERCE</H5>
<div class="SignUpArea">
    <div class="inner-SingUpArea">
        <br><label id="UsernameText">Username</label></br>
        <input id="usernameField">
        <br> <label id="PasswordText">Password</label> </br>
        <input type="password" id="passwordField">
        <br> <label id="RePasswordText">Re-Password</label> </br>
        <input type="password" id="repasswordField">
        <button id="SignupButton">SignUp</button>
        <button id="BackButton">Back</button>
    </div>
</div>

</div>
</body>

<script >
    function GoBackToLoginPage(){
      window.location.href ="index.html";
    }
    document.getElementById("BackButton").addEventListener("click",GoBackToLoginPage)
</script>
<script>
    function SignUp(){
        var username = document.getElementById("usernameField").value;
        var password = document.getElementById("passwordField").value;
        var passwordagain = document.getElementById("repasswordField").value;

        if (password != passwordagain) {
            alert("Passwords are different");
        } else {
            var userResponse = {
                username: username,
                password: password
            };

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "http://localhost:9000/user/register");
            xhr.setRequestHeader("Content-Type", "application/json");


            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var responseText = xhr.responseText;
                        console.log("Answer: ", responseText);
                        alert("User added succesfully");
                    } else {
                        console.log("Answer: ", "User cannot added");
                        alert("User cannot added");
                    }
                }
            };
            xhr.send(JSON.stringify(userResponse));
        }
    }
    document.getElementById("SignupButton").addEventListener("click",SignUp)
</script>
</html>